{% extends "base.html" %} 
{% block title %}Select IGCSE Options{% endblock %} 
{% block content%}
<h1>Choose your subjects</h1>
<form method = "POST" oninput = "unsaved=true">
<!-- This form will be used to collect the user's input -->
</form>
<button onclick = "left()" id = "left" class = "btn btn-primary" style = "background-color:black;border:none">&larr;</button>
<button onclick = "right()" id = "right" class = "btn btn-primary" style = "background-color:black;border:none">&rarr;</button>
<script>
  function changeOpacity(current,change,idx){ // This function is called to change the opacity of a slide
    if(current>=1 && change >0){ // Checks if the opacity is greater than or equal to 1 and the change is positive
      return null // This is the base case for the recursion
    }
    if(current<=0 && change <0){ // Checks if the opacity is less than or equal to 0 and the change is negative
      return null // This is the base case for the recursion
    }
    current+=change // This changes the opacity of the slide
    slides[idx].style.opacity = current.toString() // This changes the opacity of the slide
    setTimeout(function(){changeOpacity(current,change,idx)},10) // This calls the function again after 10 milliseconds
  }
  function transition(slide1,slide2){ // This function is called to transition between slides
    changeOpacity(1,-0.1,slide1) // This changes the opacity of the slide
      setTimeout(function (){ // This function is called after 250 milliseconds
        slides[slide2].style.opacity = "0"
        slides[slide2].style.display = "block" // Shows new slide
        slides[slide1].style.display = "none" // Hides old slide
        changeOpacity(0,0.1,slide2)},250) // This changes the opacity of the slide
  }
  function unloadPage(){ // This function is called when the user tries to leave the page
      if(unsaved){ // Checks if the user has unsaved changes
          return "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?" // This is the message that will be displayed to the user
      }
  }

  window.onbeforeunload = unloadPage // This is used to check if the user has unsaved changes when they try to leave the page
  unsaved = false // This is used to check if the user has unsaved changes
  slide = 0 // This is used to keep track of the current slide
  function left(t=true){ // This function is called when the user clicks the left arrow
    slide-- // Decreases the slide number by 1
    document.getElementById("right").hidden = false // Shows the right arrow
    if(slide<=0){ // Checks if the user is on the first slide  
      slide = 0 // If the user is on the first slide, we set the slide number to 0
      document.getElementById("left").hidden = true // Hides the left arrow
    }
    else{ // The user is not on the first slide
      document.getElementById("left").hidden = false // Shows the left arrow
    }
    slides = [intro,plans,lote_div,electives_div,reserve_div] // This is a list of all the slides
    if(t){ // If a transition is required, we use t as transition is used for the function
      transition(slide+1,slide) // This function is called to transition between slides
    }
    else{ // Manually shows and hides slides
      slides[slide].style.display = "block" // Shows the current slide
      slides[slide+1].style.display = "none" // Hides previous slide
    }
  }
  function right(t=true){ // This function is called when the user clicks the right arrow
    slide++ // Increases the slide number by 1
    document.getElementById("left").hidden = false // Shows the left arrow
    if(slide>=4){ // Checks if the user is on the last slide
      slide = 4 // If the user is on the last slide, we set the slide number to 4
      document.getElementById("right").hidden = true // Hides the right arrow
    }
    else{ // The user is not on the last slide
        document.getElementById("right").hidden = false // Shows the right arrow
    }
    slides = [intro,plans,lote_div,electives_div,reserve_div] // This is a list of all the slides
    if(t){ // If a transition is required, we use t as transition is used for the function
      transition(slide-1,slide) // This function is called to transition between slides
    }
    else{ // Manually shows and hides slides
      slides[slide-1].style.display = "none" // Hides the previous slide
      slides[slide].style.display = "block" // Shows the current slide
    }
  }
  window.onload = function(){ // This function is called when the page loads
    left(false) // Calls the left function to hide the right arrow
    for(var i=1;i<slides.length;i++){ // Loop through all the slides except the first one to hide them
      slides[i].style.display = "none" // Hides this slide
    }
  }
  function dragstartHandler(ev) { // This function is called when the user starts dragging an element
    ev.dataTransfer.setData("element1", ev.target.id.split("elective_")[1]) // This is how we track which element the user is dragging
  }
  function dragoverHandler(ev){ // This function is called when the user drags an element over another element
    ev.preventDefault() // This is necessary to allow the drop event to occur
  }
  function dropHandler(ev){ // This function is called when the user drops an element on another element
    let from = ev.dataTransfer.getData("element1"); // This is how we track which element the user is dragging
    let to = ev.currentTarget.id.split("elective_")[1]; // This is how we track which element the user is dropping on
    if(from == to){ // Checks if the user is trying to drop the element on itself
      return null // If the user is trying to drop the element on itself, we do nothing
    }
    let fromSelect = document.getElementById("elective" + from); // Gets the dropdown menu of the element the user is dragging
    let toSelect = document.getElementById("elective" + to); // Gets the dropdown menu of the element the user is dropping on
    from_options = [] // This will store the options of the dropdown menu the user is dragging
    for(var option of fromSelect.children){ // Loop through each option in the dropdown menu the user is dragging
      from_options.push(option) // Adds the option to the list
    }
    to_options = [] // This will store the options of the dropdown menu the user is dropping on
    for(var option of toSelect.children){ // Loop through each option in the dropdown menu the user is dropping on
      to_options.push(option) // Adds the option to the list
    }
    fromBlock = blocks[Number(from)-1] // Gets the block of the dropdown menu the user is dragging
    toBlock = blocks[Number(to)-1] // Gets the block of the dropdown menu the user is dropping on
    let fromValue = fromSelect.value; // Gets the value of the dropdown menu the user is dragging
    let toValue = toSelect.value; // Gets the value of the dropdown menu the user is dropping on
    if(fromBlock.indexOf(toValue) == -1 || toBlock.indexOf(fromValue) == -1){ // Checks if the user is trying to place an elective in a block that does not contain it
      flash("You cannot swap those electives","error") // If the user is trying to swap electives that are not in the same block, we do nothing
      return null // Breaks out of the function
    }
    toSelected = toSelect.children[toSelect.selectedIndex].cloneNode(true) // This is used to swap the options in the dropdown menus
    fromSelect.appendChild(toSelected) // This is used to swap the options in the dropdown menus
    fromSelected = fromSelect.children[fromSelect.selectedIndex].cloneNode(true) // This is used to swap the options in the dropdown menus
    toSelect.appendChild(fromSelected) // This is used to swap the options in the dropdown menus
    fromSelect.removeChild(fromSelect.children[fromSelect.selectedIndex]) // This is used to swap the options in the dropdown menus
    toSelect.removeChild(toSelect.children[toSelect.selectedIndex]) // This is used to swap the options in the dropdown menus
    fromSelect.selectedIndex = fromSelect.children.length-1 // This is used to update the dropdown menus so the user can see the changes
    toSelect.selectedIndex = toSelect.children.length-1 // This is used to update the dropdown menus so the user can see the changes
    if(from == "1"){ // Checks if the user is dragging from the first dropdown menu
      old_value_1 = toValue // Updates the old_value_1 variable to the value of the dropdown menu the user is dropping on
    }
    else if(from == "2"){ // Checks if the user is dragging from the second dropdown menu
      old_value_2 = toValue // Updates the old_value_2 variable to the value of the dropdown menu the user is dropping on
    }
    else{ // The user is dragging from the third dropdown menu
      old_value_3 = toValue // Updates the old_value_3 variable to the value of the dropdown menu the user is dropping on
    }
    if(to == "1"){ // Checks if the user is dropping on the first dropdown menu
      old_value_1 = fromValue // Updates the old_value_1 variable to the value of the dropdown menu the user is dragging
    }
    else if(to == "2"){ // Checks if the user is dropping on the second dropdown menu
      old_value_2 = fromValue // Updates the old_value_2 variable to the value of the dropdown menu the user is dragging
    }
    else{ // The user is dropping on the third dropdown menu
      old_value_3 = fromValue // Updates the old_value_3 variable to the value of the dropdown menu the user is dragging
    }
  }
  further_pure = false // Tracks if user is taking further pure mathematics
  triple_science = false // Tracks if user is taking triple science
  english_first_language = true // Tracks if user is taking English as a first language
  mathematics_levels = ["Foundation","Higher","Further Pure"] // Levels of Mathematics offered
  science_levels = ["Double","Triple"] // Levels of Science offered
  english_levels = ["First Language","Second Language"] // Levels of English offered
  lote = ["French","Spanish", "Chinese"] // Languages other than English offered
  block1 = {{block1 | safe}} // Blocks of electives offered
  block2 = {{block2 | safe}} // Blocks of electives offered
  block3 = {{block3 | safe}} // Blocks of electives offered
  blocks = [block1,block2,block3] // Blocks of electives offered
  chinese_levels = ["Chinese as a First Language","Chinese as a Second Language","Chinese as a Foreign Language"] // Levels of Chinese offered
  newline = document.createElement("br") // Newline element for formatting
  form = document.getElementsByTagName("form")[0] // This is the form element that we will be adding to
  intro = document.createElement("div") // Creates new div
  intro.id = "intro" // Allows us to track the div in the frontend  
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "IGCSE options for AY 26/27" // This is the text that will be displayed to the user
  intro.appendChild(h3) // Adds the h3 to the form so users know what to select
  p = document.createElement("p") // Creates new p
  p.innerHTML = "Please use <a href = 'https://igcse.options.nexus.edu.sg' >this link</a> to learn more about the IGCSE programme at Nexus. <br />Learners in Year 10 and Year 11 study Maths, English, Science and Global Perspectives as core subjects. Most learners also take a language as well. The language studied should be the same as the one taken in year nine. If you have any concerns about your language pathway please speak to your current language teacher.<br />Please complete each section of this form to let us know the  elective subjects you would like to take. All learners enrolled in our BML programme must take IELTS as one of their options. Subjects are not allocated on a first come first serve basis and you can change your mind right up until the deadline.<br />"/*<b>Please click <a href = '/plans/igcse'>here</a> to select your future plans for the IGCSEs</b><br />*/+"Please submit your options by 3pm Friday 5th December." // This is the text that will be displayed to the user on the first slide
  intro.appendChild(p) // Adds the p to the form so users know what to select
  p = document.createElement("p") // Creates new p
  checkbox = document.createElement("input") // Creates new input
  checkbox.type = "checkbox" // Makes it a checkbox
  checkbox.name = "email" // Allows us to search for the inputs by name in the backend
  checkbox.id = "email" // Allows us to track the checkbox in the frontend
  checkbox.style.margin = "0px 5px 0px 0px"
  p.appendChild(checkbox) // Adds the checkbox to the form
  label = document.createElement("label") // Creates label for the input
  label.innerHTML = " I wish to receive a copy of these choices to my email address" // This is the text that will be displayed to the user
  p.appendChild(label) // Adds the label to the form
  intro.appendChild(p) // Adds the p to the form so users know what to select
  form.appendChild(intro) // Adds the div to the form
  plans = document.createElement("div")
  plans.id = "plans"
  plans.innerHTML = `
      <h3>Will you be studying IGCSE at nexus?</h3>
      {%for option in igcse_plans%}
        <input type = "radio" name = "igcse" value = "{{option}}" {%if user.studying_igcse == option%} checked {%endif%}/>
        {{option}}
        <br />
      {%endfor%}`
  form.appendChild(plans)
  english_div = document.createElement("div") // Creates new div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your English level:" // This is the text that will be displayed to the user
  english_div.appendChild(h3) // Adding the h3 to the form so users know what to select
  for (var level of english_levels){ // Loop through each level of English
    radio = document.createElement("input") // Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.name = "english" // We will search for the inputs by name in the backend
    radio.value = level // Allows us to track the level the user selects in the backend
    radio.id = level // Allows us to track the level the user selects in the frontend
    radio.required = true // Required
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = level // This is how the users will know what the radio button is for
    label.htmlFor = level // Links the label to the radio button
    english_div.appendChild(radio) // Adds the radio button to the form
    english_div.appendChild(label) //Adds its label to the form as well
    english_div.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") // Resets newline so we can add it again later
    if(level == "First Language"){ // Checks if the user has selected English as a first language
      radio.onclick = function(){ // If the user clicks this radio, the following function will be called
          english_first_language = true // Helps keep track of their selection in the frontend
      }
    }
    else{ // The user has selected English as a second language
      radio.onclick = function(){ // When this radio is clicked, the following function will be called
          english_first_language = false // Helps keep track of their selection in the frontend
          document.getElementById("Chinese").checked = true // This will automatically select Chinese as their LOTE
          document.getElementById("Chinese").click() // This will trigger the onclick function, which opens the menu to select the user's Chinese language level
          document.getElementById("Chinese as a First Language").checked = true // This will automatically select Chinese as a first language
          flash("Chinese has been automatically selected as your LOTE and as a first language","info") // This is a function that will display a message to the user
      }
    }
  }
  /*h3 = document.createElement("h3") // Creates new h3
  math_div = document.createElement("div") // Creates new div
  h3.innerHTML = "Select your Mathematics level:" // This is the text that will be displayed to the user
  math_div.appendChild(h3) // Adding the h3 to the form so users know what to select
  for(var level of mathematics_levels){ // Loop through each level of Mathematics
    radio = document.createElement("input") //Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.name = "mathematics" // Allows us to search for the inputs by name in the backend
    radio.value = level // Allows us to track the level the user selects in the backend
    radio.id = level // Allows us to track the level the user selects in the frontend
    radio.required = true // Required 
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = level // This is how the users will know what the radio button is for
    label.htmlFor = level // Links the label to the radio button
    math_div.appendChild(radio) // Adds the radio button to the form
    math_div.appendChild(label) // Adds its label to the form as well
    math_div.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") // Resets newline so we can add it again later
    radio.addEventListener("change", function(){ // This function will be called when the user selects a different radio button
      if(this.checked && this.value == "Further Pure"){ // Checks if the user has selected Further Pure Mathematics
        further_pure = true // This is used to check if the user has selected Further Pure Mathematics
        idx = 1 // This is used to check the earliest elective slot which is available
        cont = true // This is used to check if the user has already selected Further Pure Mathematics as an elective
        for(i=0;i<3;i++){ // Checks all 3 electives to see if the user has already selected Further Pure Mathematics as an elective
          if(document.getElementById("elective"+(i+1).toString()).value=="Further Pure Mathematics"){ // Checks if the user has already selected Further Pure Mathematics as an elective
            cont = false // If the user has already selected Further Pure Mathematics as an elective, we set cont to false
            break // We break out of the loop if the user has already selected Further Pure Mathematics as an elective
          }
        }
        if(cont){ // If the user has not already selected Further Pure Mathematics as an elective, we add it to the first available elective slot
        while(document.getElementById("elective"+idx.toString()).value == "Triple Science"){
          idx ++ // Iterates through all electives until it finds one that is not already selected as Triple Science
        }
          document.getElementById("elective"+idx.toString()).value = "Further Pure Mathematics" // Sets the value of the elective to Further Pure Mathematics
          document.getElementById("elective"+idx.toString()).onchange()
          flash("Further Pure Mathematics has been automatically added to your electives","info")
        }
      }
      else{ // The user has not selected Further Pure Mathematics
        further_pure = false // This is used to check if the user has selected Further Pure Mathematics
        for(i=0;i<3;i++){ // Checks all 3 electives to see if the user has selected Further Pure Mathematics as an elective
          if(document.getElementById("elective"+(i+1).toString()).value == "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics as an elective
            document.getElementById("elective"+(i+1).toString()).selectedIndex = -1// Unselects Further Pure Mathematics as an elective
            flash("Further Pure Mathematics has been automatically removed from your electives","info") // This is a function that will display a message to the user
            document.getElementById("elective"+(i+1).toString()).onchange() // This will trigger the onchange function, which updates the other dropdown menus
            break // We break out of the loop if the user has selected Further Pure Mathematics as an elective
          }
        }
      }
    })
  }
  form.appendChild(math_div) // Adds the div to the form
  science_div = document.createElement("div") // Creates new div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your Science level:" // This is the text that will be displayed to the user
  science_div.appendChild(h3) // Adds the h3 to the form so users know what to select
  for (var level of science_levels){ // Loop through each level of Science
    radio = document.createElement("input") // Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.name = "science" // Allows us to search for the inputs by name in the backend
    radio.value = level // Allows us to track the level the user selects in the backend
    radio.id = level // Allows us to track the level the user selects in the frontend
    radio.required = true // Required
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = level // This is how the users will know what the radio button is for
    label.htmlFor = level // Links the label to the radio button
    science_div.appendChild(radio) // Adds the radio button to the form
    science_div.appendChild(label) // Adds its label to the form as well
    science_div.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") // Resets newline so we can add it again later
    radio.addEventListener("change", function(){ // This function will be called when the user selects a different radio button
      if(this.checked && this.value == "Triple"){ // Checks if the user has selected Triple Science
        triple_science = true // This is used to check if the user has selected Triple Science
        idx = 1 // This is used to check the earliest elective slot which is available
        cont = true // This is used to check if the user has already selected Triple Science as an elective
        for(i=0;i<3;i++){ // Checks all 3 electives to see if the user has already selected Triple Science as an elective
          if(document.getElementById("elective"+(i+1).toString()).value=="Triple Science"){ // Checks if the user has already selected Triple Science as an elective
            cont = false // If the user has already selected Triple Science as an elective, we set cont to false
            break // We break out of the loop if the user has already selected Triple Science as an elective
          }
        }
        if(cont){ // If the user has not already selected Triple Science as an elective, we add it to the first available elective slot
        while(document.getElementById("elective"+idx.toString()).value == "Further Pure Mathematics"){
          idx ++ // Iterates through all electives until it finds one that is not already selected as Further Pure Mathematics
        }
          document.getElementById("elective"+idx.toString()).value = "Triple Science" // Sets the value of the elective to Triple Science
          flash("Triple Science has been automatically added to your electives","info") // This is a function that will display a message to the user
          document.getElementById("elective"+idx.toString()).onchange() // This will trigger the onchange function, which updates the other dropdown menus
        }
      }
      else{ // The user has selected Double Science
        triple_science = false // This is used to check if the user has selected Triple Science
        for(i=0;i<3;i++){ // Checks all 3 electives to see if the user has selected Triple Science as an elective
          if(document.getElementById("elective"+(i+1).toString()).value == "Triple Science"){ // Checks if the user has selected Triple Science as an elective
            document.getElementById("elective"+(i+1).toString()).selectedIndex = -1
            flash("Triple Science has been automatically removed from your electives","info")
            document.getElementById("elective"+(i+1).toString()).onchange()
            break // We break out of the loop if the user has selected Triple Science as an elective
          }
        }
      }
    })
  }
  form.appendChild(science_div) // Adds the div to the form*/
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your language other than English:" // This is the text that will be displayed to the user
  lote_div = document.createElement("div") // Creates new div
  language_div = document.createElement("div") // Creates new div
  language_div.id = "languages" // Allows us to track the div in the frontend
  lote_div.appendChild(h3) // Adds the h3 to the form so users know what to select
  chinese_form = document.createElement("div") // Creates new div for the form that appears if the user selects Chinese as their LOTE
  chinese_form.id = "chinese_form" // Allows us to track the div in the frontend
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your level:" // This is the text that will be displayed to the user
  chinese_form.appendChild(h3) // Adds the h3 to the form so users know what to select
  for(var level of chinese_levels){ // Loop through each level of Chinese
    radio = document.createElement("input") // Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.name = "chinese" // Allows us to search for the inputs by name in the backend
    radio.value = level // Allows us to track the level the user selects in the backend
    radio.id = level // Allows us to track the level the user selects in the frontend
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = level // This is how the users will know what the radio button is for
    label.htmlFor = level // Links the label to the radio button
    radio.required = true // Required
    /*radio.addEventListener("change", function(){ // This function will be called when the user selects a different radio button
        if(this.checked  && this.value.split("First").length<=1){ // Checks if the user has not selected Chinese as a first language
          english_first_language = true // This is used to check if the user has selected English as a first language
          if(document.getElementById(english_levels[0]) && !document.getElementById(english_levels[0]).checked){ // Checks if the user has not already selected English as a first language
          flash("English has been automatically selected as your first language","info") // This is a function that will display a message to the user
            document.getElementById(english_levels[0]).checked = true // This will automatically select English as a first language
          }
        }
    })*/
    chinese_form.appendChild(radio) // Adds the radio button to the form
    chinese_form.appendChild(label) // Adds its label to the form as well
    chinese_form.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") //Reset newline to be added again
  }
  other_form = document.createElement("div") // Creates new div for the form that appears if the user selects French or Spanish as their LOTE
  other_form.id = "other_form" // Allows us to track the div in the frontend
  other_levels = ["Foreign Language","Foundational Level"] // Levels of French and Spanish offered
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your level:" // This is the text that will be displayed to the user
  other_form.appendChild(h3) // Adds the h3 to the form so users know what to select
  for(var level of other_levels){ // Loop through each level of French and Spanish
    radio = document.createElement("input") // Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.name = "others" // Allows us to search for the inputs by name in the backend
    radio.value = level // Allows us to track the level the user selects in the backend
    radio.id = level // Allows us to track the level the user selects in the frontend
    radio.required = true // Required
    radio.addEventListener("change", function(){ // This function will be called when the user selects a different radio button
          if(!document.getElementById("First Language").checked){ // Checks if the user has not already selected English as a first language
            flash("English has been automatically selected as your first language","info") // This is a function that will display a message to the user
            document.getElementById("First Language").checked = true // This will automatically select English as a first language
          }
          english_first_language = true // This is used to check if the user has selected English as a first language
    })
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = level // This is how the users will know what the radio button is for
    label.htmlFor = level // Links the label to the radio button
    other_form.appendChild(radio) // Adds the radio button to the form
    other_form.appendChild(label) // Adds its label to the form as well
    other_form.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") // Resets newline to be added again
  }
  for(var language of lote){ // Loop through each language other than English
    radio = document.createElement("input") // Creates new input
    radio.type = "radio" // Makes it a radio button
    radio.required = true // Required
    radio.name = "lote" // Allows us to search for the inputs by name in the backend
    radio.value = language // Allows us to track the language the user selects in the backend
    radio.id = language // Allows us to track the language the user selects in the frontend
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = language // This is how the users will know what the radio button is for
    label.htmlFor = language // Links the label to the radio button
    radio.addEventListener("click", function(){ // This function will be called when the user selects a different radio button
      children = language_div.children // Gets all children of the div
      while(children.length>0){ // Loop through all children of the div
        language_div.removeChild(children[0]) // Removes all children of the div
      }
      if (this.value == "Chinese"){ // Checks if the user has selected Chinese as their LOTE
        chinese_form.hidden = true // Hides the Chinese form
        chinese_form.style.opacity = 0 // Sets the opacity of the Chinese form to 0
        language_div.appendChild(chinese_form) // Adds the Chinese form to the div
        chinese_form.hidden = false // Shows the Chinese form
        i = 0 // This is used to animate the Chinese form
        function show_chinese_form(){ // This function will be called repeatedly to animate the Chinese form
          if(i==1 || i>=1){ // If the opacity is 1 or higher
            return false // If the opacity is 1 or higher, we stop the animation
          }
          i+=0.01 // Increases the opacity by 0.01 each time the function is called
          chinese_form.style.opacity = i // Sets the opacity of the Chinese form to i
          setTimeout(show_chinese_form,1) // Calls the function again after 1 millisecond
        }
        show_chinese_form() // Calls the function to start the animation
      }
      else if(this.value == "French" || this.value == "Spanish"){ // Checks if the user has selected French or Spanish as their LOTE
        /*english_first_language = true
        if(!document.getElementById('First Language').checked){
          flash("English has been automatically selected as your first language","info")
          document.getElementById('First Language').checked = true
        }
        other_form.hidden = true // Hides the French/Spanish form
        other_form.style.opacity = 0 // Sets the opacity of the French/Spanish form to 0
        language_div.appendChild(other_form) // Adds the French/Spanish form to the div
        other_form.hidden = false // Shows the French/Spanish form
        i = 0 // This is used to animate the French/Spanish form
        function show_other_form(){ // This function will be called repeatedly to animate the French/Spanish form
          if(i==1 || i>=1){ // If the opacity is 1 or higher
            return false // If the opacity is 1 or higher, we stop the animation
          }
          i+=0.01 // Increases the opacity by 0.01 each time the function is called
          other_form.style.opacity = i // Sets the opacity of the French/Spanish form to i
          setTimeout(show_other_form,1) // Calls the function again after 1 millisecond
        }
        show_other_form() // Calls the function to start the animation*/
      }
    })
    lote_div.appendChild(radio) // Adds the radio button to the form
    lote_div.appendChild(label) // Adds its label to the form as well
    lote_div.appendChild(newline) // Adds a new line to separate the radio buttons
    newline = document.createElement("br") // Resets newline to be added again
  }
  lote_div.appendChild(language_div) // Adds the div to the form
  form.appendChild(lote_div) // Adds the div to the form
  electives_div = document.createElement("div") // Creates new div
  div1 = document.createElement("div") // Creates new div
  div1.draggable = true // Makes the div draggable
  div1.id = "elective_1" // Allows us to track the div in the frontend
  div1.ondragstart = function() {dragstartHandler(event)} // This function will be called when the user starts dragging the div
  div1.ondragover = function() {dragoverHandler(event)} // This function will be called when the user drags the div over another div
  div1.ondrop = function() {dropHandler(event)} // This function will be called when the user drops the div on another div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your 1st elective" // This is the text that will be displayed to the user
  div1.appendChild(h3) // Adds the h3 to the div, which will be added to the form later
  select = document.createElement("select") // Creates a new dropdown menu
  select.name = "elective1" // Allows us to track the elective the user selects in the backend
  select.id = "elective1" // Allows us to track the elective the user selects in the frontend
  select.className = "form form-control" // Bootstrap class for dropdown menu styling
  current = 0 // This is used to keep track of the current index so we do not skip all electives
  for(var subject of block1){ // Loop through each subject in the electives list
    option = document.createElement("option") // Adds new option to the dropdown menu
    option.value = subject // This is how we track the elective the user selects in the backend
    option.id = subject // This is how we track the elective the user selects in the frontend
    option.innerHTML = subject // This is how the users will know what the option is for
    select.appendChild(option) // Adds the option to the dropdown menu
  }
  old_value_1 = "" // This is used to check what the user changed the elective from
  select.onchange = function(){ // This function will be called when the user selects a different option in the dropdown menu
    /*if(old_value_1 == "Triple Science" && document.getElementById("elective1").value != "Triple Science" && document.getElementById("elective2").value != "Triple Science" && document.getElementById("elective3").value != "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = false // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Double").checked){ // Checks if the user has not already selected Double Science as their Science level
      document.getElementById("Double").checked = true // This will automatically select Double Science as the user's Science level
      flash("Double Science has been automatically selected as your Science level","info")
      }
    }
    if(old_value_1 == "Further Pure Mathematics" && document.getElementById("elective1").value != "Further Pure Mathematics" && document.getElementById("elective2").value != "Further Pure Mathematics" && document.getElementById("elective3").value != "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = false // This is used to check if the user has selected Further Pure Mathematics
      if(document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
        document.getElementById("Further Pure").checked = false // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically deselected as your Maths level","info") // This is a function that will display a message to the user
      }
    }
    if (this.value == "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = true // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Triple").checked){ // Checks if the user has not already selected Triple Science as their Science level
        document.getElementById("Triple").checked = true // This will automatically select Triple Science as the user's Science level
        flash("Triple Science has been automatically selected as your Science level","info") // This is a function that will display a message to the user
      }
    }
    if(this.value == "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = true // This is used to check if the user has selected Further Pure Mathematics
      if(!document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
        document.getElementById("Further Pure").checked = true // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically selected as your Mathematics level","info") // This is a function that will display a message to the user
      }
    }*/
    value = this.value // Gets the value selected by the user on this dropdown
    new_electives = block2.slice() // Creates a copy of the electives list
    if(block2.indexOf(value) != -1){ // Checks if the subject the user has selected is in the second block
    new_electives.splice(block2.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    elective2 = document.getElementById("elective2") // Gets the second elective selected by the user
    elective3 = document.getElementById("elective3") // Gets the third elective selected by the user
    idx2 = document.getElementById("elective2").selectedIndex // Gets the index of the second elective selected by the user
    idx3 = document.getElementById("elective3").selectedIndex // Gets the index of the third elective selected by the user
    elective2_value = document.getElementById("elective2").value // Gets the value of the second elective selected by the user
    elective3_value = document.getElementById("elective3").value // Gets the value of the third elective selected by the user
    document.getElementById("elective2").replaceChildren() // Removes all options from the second elective dropdown menu
    document.getElementById("elective3").replaceChildren() // Removes all options from the third elective dropdown menu
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject == elective3_value){ // If the subject is the same as the subject selected in the third elective dropdown menu
        continue // If the subject is the same as the subject selected in the third elective dropdown menu, we skip it as it is already selected
      }
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      elective2.appendChild(option) // Adds the option to the dropdown menu
      if(subject == elective2_value){ // Checks if the subject is the same as the subject selected in the second elective dropdown menu
        option.selected = true // Selects the option that the user had selected before
      }
    }
    new_electives = block3.slice() // Creates a copy of the electives list
    if(block3.indexOf(value) != -1){
      new_electives.splice(block3.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject == elective2_value){ // If the subject is the same as the subject selected in the second elective dropdown menu
        continue // If the subject is the same as the subject selected in the second elective dropdown menu, we skip it as it is already selected
      }
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      elective3.appendChild(option) // Adds the option to the dropdown menu
      if(subject == elective3_value){ // Checks if the subject is the same as the subject selected in the third elective dropdown menu
        option.selected = true // Selects the option that the user had selected before
      }
    }
    if(idx2 == -1){ // Checks if the user has selected an option in the second elective dropdown menu
      elective2.selectedIndex = -1 // Unselects the second elective dropdown menu
    }
    if(idx3 == -1){ // Checks if the user has selected an option in the third elective dropdown menu
      elective3.selectedIndex = -1 // Unselects the third elective dropdown menu
    }
    old_value_1 = value // Updates this to the current value so we can check what the user changed the elective from
  }
  div1.appendChild(select) // Adds the dropdown menu to the div
  electives_div.appendChild(div1) // Adds the div to the form
  div2 = document.createElement("div") // Creates new div
  div2.draggable = true // Makes the div draggable
  div2.id = "elective_2" // Allows us to track the div in the frontend
  div2.ondragstart = function() {dragstartHandler(event)} // This function will be called when the user starts dragging the div
  div2.ondragover = function() {dragoverHandler(event)} // This function will be called when the user drags the div over another div
  div2.ondrop = function() {dropHandler(event)} // This function will be called when the user drops the div on another div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your 2nd elective" // This is the text that will be displayed to the user
  div2.appendChild(h3) // Adds the h3 to the div which will be added to the form later
  select = document.createElement("select") // Creates a new dropdown menu
  select.name = "elective2" // Allows us to track the elective the user selects in the backend
  select.id = "elective2" // Allows us to track the elective the user selects in the frontend
  select.className = "form form-control" // Bootstrap class for dropdown menu styling
  current = 0 // This is used to keep track of the current index so we do not skip all electives
  for(var subject of block2){ // Loop through each subject in the electives list
    current++ // Allows us to keep track of the current index so we do not skip all electives
    option = document.createElement("option") // Adds new option to the dropdown menu
    option.value = subject // This is how we track the elective the user selects in the backend
    option.id = subject // This is how we track the elective the user selects in the frontend
    option.innerHTML = subject // This is how the users will know what the option is for
    select.appendChild(option) // Adds the option to the dropdown menu
  }
  div2.appendChild(select) // Adds the dropdown menu to the div
  electives_div.appendChild(div2) // Adds the div to the form
  old_value_2 = "" // This is used to check what the user changed the elective from
  select.onchange = function(){ // This function will be called when the user selects a different option in the dropdown menu
    /*if(old_value_2 == "Triple Science" && document.getElementById("elective1").value != "Triple Science" && document.getElementById("elective2").value != "Triple Science" && document.getElementById("elective3").value != "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = false // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Double").checked){ // Checks if the user has not already selected Double Science as their Science level
        document.getElementById("Double").checked = true // This will automatically select Double Science as the user's Science level
        flash("Double Science has been automatically selected as your Science level","info") // This is a function that will display a message to the user
      }
    }
    if(old_value_2 == "Further Pure Mathematics" && document.getElementById("elective1").value != "Further Pure Mathematics" && document.getElementById("elective2").value != "Further Pure Mathematics" && document.getElementById("elective3").value != "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = false // This is used to check if the user has selected Further Pure Mathematics
      if(document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
        document.getElementById("Further Pure").checked = false // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically deselected as your Mathematics level","info") // This is a function that will display a message to the user
      }
    }
    if (this.value == "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = true // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Triple").checked){ // Checks if the user has not already selected Triple Science as their Science level
        document.getElementById("Triple").checked = true // This will automatically select Triple Science as the user's Science level
        flash("Triple Science has been automatically selected as your Science level","info") // This is a function that will display a message to the user
      }
    }
    if(this.value == "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = true // This is used to check if the user has selected Further Pure Mathematics
      if(!document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
        document.getElementById("Further Pure").checked = true // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically selected as your Mathematics level","info") // This is a function that will display a message to the user
      }
    }*/
    value = this.value // Gets the value selected by the user on this dropdown
    new_electives = block1.slice() // Creates a copy of the electives list
    if(block1.indexOf(value) != -1){ // Checks if the subject the user has selected is in the first block
      new_electives.splice(block1.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    elective1 = document.getElementById("elective1") // Gets the first elective selected by the user
    elective3 = document.getElementById("elective3") // Gets the third elective selected by the user
    idx1 = document.getElementById("elective1").selectedIndex // Gets the index of the first elective selected by the user
    idx3 = document.getElementById("elective3").selectedIndex // Gets the index of the third elective selected by the user
    elective1_value = document.getElementById("elective1").value // Gets the value of the first elective selected by the user
    elective3_value = document.getElementById("elective3").value // Gets the value of the third elective selected by the user
    document.getElementById("elective1").replaceChildren() // Removes all options from the first elective dropdown menu
    document.getElementById("elective3").replaceChildren() // Removes all options from the third elective dropdown menu
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject == elective3_value){ // If the subject is the same as the subject selected in the third elective dropdown menu
        continue // If the subject is the same as the subject selected in the third elective dropdown menu, we skip it
      }
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      elective1.appendChild(option) // Adds the option to the dropdown menu
      if(subject == elective1_value){ // Checks if the subject is the same as the subject selected in the first elective dropdown menu
        option.selected = true // Selects the option that the user had selected before
      }
    }
    new_electives = block3.slice() // Creates a copy of the electives list
    if(block3.indexOf(value) != -1){ // Checks if the subject the user has selected is in the third block
      new_electives.splice(block3.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject != elective1_value){ // If the subject is not the same as the subject selected in the first elective dropdown menu
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      if(subject == elective3_value){ // Checks if the subject is the same as the subject selected in the third elective dropdown menu
          option.selected = true // Selects the option that the user had selected before
      }
      elective3.appendChild(option) // Adds the option to the dropdown menu
      }
    }
    if(idx1 == -1){ // Checks if the user has selected an option in the first elective dropdown menu
      elective1.selectedIndex = -1 // Unselects the first elective dropdown menu
    }
    if(idx3 == -1){ // Checks if the user has selected an option in the third elective dropdown menu
      elective3.selectedIndex = -1 // Unselects the third elective dropdown menu
    }
    old_value_2 = value // Updates this to the current value so we can check what the user changed the elective from
  }
  div3 = document.createElement("div") // Creates new div
  div3.draggable = true // Makes the div draggable
  div3.id = "elective_3" // Allows us to track the div in the frontend
  div3.ondragstart = function() {dragstartHandler(event)} // This function will be called when the user starts dragging the div
  div3.ondragover = function() {dragoverHandler(event)} // This function will be called when the user drags the div over another div
  div3.ondrop = function() {dropHandler(event)} // This function will be called when the user drops the div on another div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your 3rd elective" // This is the text that will be displayed to the user
  div3.appendChild(h3) // Adds the h3 to the div which will be added to the form later
  select = document.createElement("select") // Creates a new dropdown menu
  select.name = "elective3" // This is how we track the elective the user selects in the backend
  select.id = "elective3" // This is how we track the elective the user selects in the frontend
  select.className = "form form-control" // Bootstrap class for dropdown menu styling
  current = 0 // This is used to keep track of the current index so we do not skip all electives
  for(var subject of block3){ // Loop through each subject in the electives list
    option = document.createElement("option") // Creates a new element in the dropdown menu
    option.value = subject // This is how we track the elective the user selects in the backend
    option.id = subject // This is how we track the elective the user selects in the frontend
    option.innerHTML = subject // This is how the users will know what the option is for
    select.appendChild(option) // Adds the option to the dropdown menu
  }
  old_value_3 = "" // This is used to check what the user changed the elective from
  select.onchange = function(){ // This function will be called when the user selects a different option in the dropdown menu
    /*if(old_value_3 == "Triple Science" && document.getElementById("elective1").value != "Triple Science" && document.getElementById("elective2").value != "Triple Science" && document.getElementById("elective3").value != "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = false // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Double").checked){
        document.getElementById("Double").checked = true // This will automatically select Double Science as the user's Science level
        flash("Double Science has been automatically selected as your Science level","info") // This is a function that will display a message to the user
      }
    }
    if(old_value_3 == "Further Pure Mathematics" && document.getElementById("elective1").value != "Further Pure Mathematics" && document.getElementById("elective2").value != "Further Pure Mathematics" && document.getElementById("elective3").value != "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = false // This is used to check if the user has selected Further Pure Mathematics
      if(document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
      document.getElementById("Further Pure").checked = false // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically deselected as your Mathematics level","info") // This is a function that will display a message to the user
      }
    }*/
    /*if (this.value == "Triple Science"){ // Checks if the user has selected Triple Science
      triple_science = true // This is used to check if the user has selected Triple Science
      if(!document.getElementById("Triple").checked){ // Checks if the user has not already selected Triple Science as their Science level
        document.getElementById("Triple").checked = true // This will automatically select Triple Science as the user's Science level
        flash("Triple Science has been automatically selected as your Science level","info")
      }
    }
    if(this.value == "Further Pure Mathematics"){ // Checks if the user has selected Further Pure Mathematics
      further_pure = true // This is used to check if the user has selected Further Pure Mathematics
      if(!document.getElementById("Further Pure").checked){ // Checks if the user has not already selected Further Pure Mathematics as their Mathematics level
        document.getElementById("Further Pure").checked = true // This will automatically select Further Pure Mathematics as the user's Mathematics level
        flash("Further Pure Mathematics has been automatically selected as your Mathematics level","info") // This is a function that will display a message to the user
      }
    }*/
    value = this.value // Gets the value selected by the user on this dropdown
    new_electives = block1.slice() // Creates a copy of the electives list
    if(block1.indexOf(value) != -1){ // Checks if the subject the user has selected is in the first block
      new_electives.splice(block1.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    elective1 = document.getElementById("elective1") // Gets the first elective selected by the user
    idx1 = document.getElementById("elective1").selectedIndex // Gets the index of the first elective selected by the user
    elective2 = document.getElementById("elective2") // Gets the second elective selected by the user
    idx2 = document.getElementById("elective2").selectedIndex // Gets the index of the second elective selected by the user
    elective1_value = document.getElementById("elective1").value // Gets the value of the first elective selected by the user
    elective2_value = document.getElementById("elective2").value // Gets the value of the second elective selected by the user
    document.getElementById("elective1").replaceChildren() // Removes all options from the first elective dropdown menu
    document.getElementById("elective2").replaceChildren() // Removes all options from the second elective dropdown menu
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject != elective2_value){ // If the subject is not the same as the subject selected in the second elective dropdown menu
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      elective1.appendChild(option)  // Adds the option to the dropdown menu
      if(subject == elective1_value){ // Checks if the subject is the same as the subject selected in the first elective dropdown menu
        option.selected = true // Selects the option that the user had selected before
      }
      }
    }
    new_electives = block2.slice() // Creates a copy of the electives list
    if(block2.indexOf(value) != -1){ // Checks if the subject the user has selected is in the third block
      new_electives.splice(block2.indexOf(value),1) // Removes the subject the user has selected from the copy of the electives list so no duplicates are selected
    }
    for(var subject of new_electives){ // Loop through each subject in the new_electives list
      if(subject != elective1_value){ // If the subject is not the same as the subject selected in the first elective dropdown menu
      option = document.createElement("option") // Adds new option to the dropdown menu
      option.value = subject // This is how we track the elective the user selects in the backend
      option.id = subject  // This is how we track the elective the user selects in the frontend
      option.innerHTML = subject // This is how the users will know what the option is for
      elective2.appendChild(option) // Adds the option to the dropdown menu
      if(subject == elective2_value){ // Checks if the subject is the same as the subject selected in the second elective dropdown menu
        option.selected = true // Selects the option that the user had selected before
      }
      }
    }
    if(idx1 == -1){ // Checks if the user has selected an option in the first elective dropdown menu
      elective1.selectedIndex = -1 // Unselects the first elective dropdown menu
    }
    if(idx2 == -1){ // Checks if the user has selected an option in the second elective dropdown menu
      elective2.selectedIndex = -1 // Unselects the second elective dropdown menu
    }
    old_value_3 = value // Updates this to the current value so we can check what the user changed the elective from
  }
  div3.appendChild(select) // Adds the dropdown menu to the div
  electives_div.appendChild(div3) // Adds the div to the form
  //form.appendChild(newline) // Adds a new line to separate the dropdown menu from the submit button
  submit = document.createElement("input") // Creates a new input
  submit.type = "submit" // Makes the input a submit button
  submit.onclick = function(){ // When the button is clicked, the following function is called
    event.preventDefault() // Prevents the form from submitting
    idx = 0 // Keeps track of the current slide
    if(elective1.selectedIndex == -1 || elective2.selectedIndex == -1 || elective3.selectedIndex == -1){ // Checks if the user has not selected an option
      flash("Please complete all fields","error") // Displays an error message to the user
      document.getElementById("left").hidden = false // Shows the left arrow
      document.getElementById("right").hidden = false // Shows the right arrow
      transition(slide,3) // Switches to the slide that the user has not completed
      slide = 3;
      return false // If the user has not selected an option, we do not submit the form
    }
    /*if(document.getElementById("Chinese").checked && !document.querySelector("input[name='chinese']:checked")){
      flash("Please complete all fields","error") // Displays an error message to the user
      document.getElementById("left").hidden = true // Hides the left arrow
      document.getElementById("right").hidden = false // Shows the right arrow
      transition(slide,0) // Switches to the slide that the user has not completed
      return false // If the user has not selected an option, we do not submit the form
    }*/
    for(i of slides){ //Loop through all slides
      if(idx==0){ // Checks if we are on the intro or  slide
        idx++ // Increments counter
        continue // Skips the slide
      }
      if(!i.querySelector("input:checked") && !i.querySelector("select")){ // Checks if the user has not selected an option
        transition(slide,idx) // Switches to the slide that the user has not completed
        if(idx == 0){ // Checks if the user is on the first slide
          document.getElementById("left").hidden = true // Hides the left arrow
        }
        else{ // The user is not on the first slide
          document.getElementById("left").hidden = false // Shows the left arrow
        }
        if(idx == 4){ // Checks if the user is on the last slide
          document.getElementById("right").hidden = true // Hides the right arrow
        }
        else{ // The user is not on the last slide
          document.getElementById("right").hidden = false // Shows the right arrow
        }
        slide = idx*1 // Switches to the slide that the user has not completed
        flash("Please complete all fields","error") // Displays an error message to the user
        return false // If the user has not selected an option, we do not submit the form
      }
      idx++ // Increases the index by 1
    }
    window.onbeforeunload = null // This is used to check if the user has unsaved changes when they try to leave the page
    form.submit() // Submits the form
  }
  submit.value = "Submit" // This is the text that will be displayed on the button
  submit.className = "btn btn-primary" // Bootstrap class for buttons styling
  submit.style = "background-color:black;border:none" // Custom styling for the button
  electives_div.appendChild(newline) // Adds a new line to separate the dropdown menu from the submit button
  form.appendChild(electives_div) // Adds the div to the form
  elective1.selectedIndex = -1 // Unselects the first elective dropdown menu
  elective2.selectedIndex = -1 // Unselects the second elective dropdown menu
  elective3.selectedIndex = -1 // Unselects the third elective dropdown menu
  reserve_div = document.createElement("div") // Creates new div
  h3 = document.createElement("h3") // Creates new h3
  h3.innerHTML = "Select your reserve choice:" // This is the text that will be displayed to the user
  reserve_div.appendChild(h3) // Adds the h3 to the form so users know what to select
  all_choices = [] // This will store all the choices that the user can select from
  {%for subject in block1%} // Loop through each subject in the electives list
    if(all_choices.indexOf("{{subject | safe}}") == -1){ // Checks if the subject is already in the list
      all_choices.push("{{subject | safe}}") // Adds the subject to the list
    }
  {%endfor%}
  {%for subject in block2%} // Loop through each subject in the electives list
    if(all_choices.indexOf("{{subject | safe}}") == -1){ // Checks if the subject is already in the list
      all_choices.push("{{subject | safe}}") // Adds the subject to the list
    }
  {%endfor%}
  {%for subject in block3%} // Loop through each subject in the electives list
    if(all_choices.indexOf("{{subject | safe}}") == -1){ // Checks if the subject is already in the list
      all_choices.push("{{subject | safe}}") // Adds the subject to the list
    }
  {%endfor%}
  for(var subject of all_choices){ // Loop through each subject in the electives list
    option = document.createElement("input") // Creates a new input
    option.type = "radio" // Makes the input a radio button
    option.name = "reserve" // Allows us to search for the inputs by name in the backend
    option.id = "reserve_"+subject // Allows us to track the subject the user selects in the frontend
    option.value = subject // Allows us to track the subject the user selects in the backend
    option.innerHTML = subject // This is how the users will know what the radio button is for
    option.onclick = function(){ // This function will be called when the user selects a different radio button
      if([elective1.value,elective2.value,elective3.value].indexOf(this.value) != -1){ // Checks if the user has already selected the subject as an elective
        this.checked = false // Unselects the radio button
        flash("You cannot select a reserve choice that you have already selected as an elective","warning") // Displays an error message to the user
      }
    }
    reserve_div.appendChild(option) // Adds the option to the form
    label = document.createElement("label") // Creates label for the input
    label.innerHTML = subject // This is how the users will know what the radio button is for
    label.htmlFor = subject // Links the label to the radio button
    reserve_div.appendChild(label) // Adds the label to the form
    reserve_div.appendChild(document.createElement("br")) // Adds a new line to separate the radio buttons
  }
  reserve_div.appendChild(submit) // Adds the submit button to the form
  form.appendChild(reserve_div) // Adds the div to the form
</script>
{% endblock %}